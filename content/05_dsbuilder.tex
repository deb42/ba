\section{Vorstellung des Moodleplugins EASy-DSBuilder}
\label{sec:dsbuilder}
Der EASy-DSBuilder ist ein E-Assessent Tool, welches der Evaluation grundlegender Konzepte über Operationen (z.B. Suchen, Einfügen, und Entfernen) innerhalb der Datenstruktur \textit{Binärbaum} dient \cite{Usener2014}. 

Das Tool wurde speziell für die Lernplattform Moodle implementiert. 

Diese Kapitel wird das Tool EASy-DSBuilder vorstellen. Hierbei wird zu erst in Kapitel \ref{sec:funktionalitaet} auf die Funktionalität aus Benutzersicht eingegangen. Anschließend erfolgt eine Erläuterung der Implementation (Kapitel %\ref{?}).

\subsection{Funktionalität aus Benutzersicht}
\label{sec:funktionalitaet}

Im folgenden Kapitel wird die Funktionalität des Moodleplugins EASy-DSBuilder vorgestellt. Hierbei wird auf die beiden Sichten Student und Lehrender eingegangen.

\paragraph{Lehrender} \hfill \\
Der Lehrende hat zwei Grundlegend Aufgaben. Zum einen ist er dafür verantwortlich, dass eine Aufgabe erstellt wird, zum anderen hat er die Möglichkeit, die Ergebnisse einzusehen, um beispielsweise Indikatoren zur Verbesserung der Lehre zu finden \cite{Usener2014}. Wird eine neue Aufgabe erstellt, hat der Lehrende die Möglichkeit allgemeine Informationen wie den \textit{Titel}, die \textit{Beschreibung} und das \textit{Fälligkeitsdatum} anzugeben. Unter \textit{Source Files} kann der Lehrende über Drag-and-Drop seine eigene Implementierung einer Datenstruktur zu dem Moodleplugin hinzufügen. Hierzu muss er jedoch eine Wrapper auf Basis eines Interfaces implementieren, welches die verlangten Voraussetzungen erfüllt. Diese Wrapperklasse muss anschließend vom Lehrenden als Hauptklasse eingestellt werden. Auf die Funktionalität der Wrapperklasse aus technischer Sicht wird im Kapitel \ref{sec:technWebService} näher eingegangen. Des weiteren kann der Lehrende eine Feedback aktivieren. Die genau Funktionalität des Feedbacks wird im Absatz der Studentensicht erläutert.  

\paragraph{Studierender} \hfill \\
Der Studierende verfügt über zwei Ansichten. Zum einen die Übersichtsansicht, zum anderen die Bearbeitungsansicht.
Nachdem der Studierende sich in das Plugin eingewählt hat, ist ist Übersichtsansicht über den bisherigen Verlauf des Assessments zu sehen. In dieser Übersicht ist der Abgabestatus, der Bewertungsstand, der Abgabezeitpunkt und die verbliebene Zeit zu sehen (vergl. Abb. \ref{}). Über den Button \textit{Aufgabe bearbeiten} gelangt der Studierende zum Editor, in dem die Aufgabe bearbeitet werden kann. 

Die Bearbeitungsansicht ist in drei grundlegende Abschnitte unterteilt. Den oberen Teil der Ansicht bildet ein Überblick über den aktuellen Schritt. Dieser Überblick beinhaltet den Fortschritt der Aufgabe, die Nummer des aktuellen Schritts und den aktuellen Arbeitsauftrag. Im mittleren Teil der Sicht befindet sich der Editor, in dem der Studierende die Aufgabe bearbeiten kann. Im oberen linken Bereich des Editor befinden sich drei Knöpfe (vergl. Abb. \ref{}.1), über welche der Editiermodus ausgewählt werden kann. Der 1. Knopf ermöglicht das verschieben von Konten im Editor, der zweite Knopf ermöglicht das Ziehen von Kanten zwischen zwei Knoten, und der dritte Knopf ermöglicht das Entfernen von Konten.

Der DragandDropGrafikeditor enthält zwei bearbeitbare Elemente, die Knoten und die Kanten. Über Manipulation dieser Elemente sollen Studierende den
Umgang mit Datenstrukturoperationen erlernen. Hierbei kann der Studierende Operationen wie das Einfügen in oder das Löschen aus einer Datenstruktur 
praktizieren. In der \textbf{momentanen} Version des EASyDSBuilders beginnt jeder Schritt mit dem Ergebnisbaum des zuvor eingereichten Schrittes oder einem Initiierngsbaum 
wenn, es sich um den  ersten Schritt handelt.
Auf der linken Seite des Editors wird der einzufügende Knoten bereitgestellt. Die Aufgabe des Studierenden ist es, diesen Knoten an der richtigen 
Stelle in den Baum einzufügen. \textbf{Erläuterung der Möglichkeiten von Manipulationen}
Nachdem der Studierende seine Veränderungen vorgenommen hat, kann er über den Knopf \textit{Syntax prüfen} den Baum ausbalanciert anzeigen lassen. Auf diese Weise kann der Studierende überprüfen, ob die Anwendung den Baum im Sinne des Studierenden verarbeitet hat. Entspricht die überprüfte Struktur nicht der Struktur eines Baumes, \textbf{genauere Definiton} bekommt der Studierende eine Fehlermeldung mit Hinweis über die Fehlerquelle.

Hat der Lehrende bei der Einrichtung des DSBuilders die Option \textit{direktes Feedback} eingestellt, erscheint im Falle einer falschen Eingabe ein Feedbackfeld unterhalb des Editors. In diesem Feedbackfeld wird zu erst ein Informationstext angezeigt, welches das richtige Vorgehen in dem zuvor eingereichtem Schritt beschreibt. Unterhalb dieses Informationstextes ist der korrekte Baum zu sehen. Die falsch eingeordneten Knoten sind rot markiert. 


\subsection{Umsetzung aus technischer Sicht}
\label{sec:technologien}

Das gesamte System um den EASy-DSBuilder besteht backendseitig aus zwei separaten Systemen. Zum einen gibt es das eigentliche Moodleplugin, welches in eine bestehenden Moodelplattform integriert werden kann, zum anderen gibt es einen Datenstruktur-Verarbeitungsservice, welcher als Webservice implementiert ist. Das Moodleplugin hat die Möglichkeit über die Moodle-API Daten in einer SQL-Datenbank - beispielsweise einem MySQL-Server - zu hinterlegen. Die Kommunikation zwischen dem Moodleplugin und dem Webservice läuft über das SOAP-Protokoll. Der Webservice ist als WildFly Application Server implementiert und unterliegt somit dem Java-EE7-Standard \cite{wildflyCert}. In Abbildung \ref{fig:technoloieUeberblick} ist dargestellt, wie die unterschiedlichen Technologien in einander greifen.

\begin{figure}[htbp] 
  \centering
     \includegraphics[width=0.9\textwidth]{graphics/UeberblickTechnologien.jpg}
  \caption{Technischer Überblick}
  \label{fig:technoloieUeberblick}
\end{figure}

Der Datenstruktur-Verarbeitungsservice hat die Aufgabe Datenstrukturen mit Hilfe von Die Separierung des Systems erfolgt aus den Risiken, dass der Code schädlich sein oder eine schlechte Ausführungsleistung aufweist kann. Durch die Trennung der beiden Systeme kann in beiden Fällen Zusammen- oder Performanceeinbrüchen der gesamten E-Learning-Plattform vorgebeugt werden. Weiterhin kann so Datendiebstahl vorgebeugt werden, da in der Verarbeitungsumgebung keine nutzerbezogenen Daten verarbeitet werden. Bei Ausfall des Verarbeitungsservices ist jedoch das Aufrufen eines nächsten Schrittes nicht mehr möglich \cite{Usener2014}.

Auf Clientseite wird HTML mit CSS und JavaScript verwendet, um das Plugin für den Benutzer darstellen zu können. Als JavaScript-Frameworks wird jQuery und und als JavaSrcipt-Applikation wird jsdot eingesetzt. Über jQuery ist die Kommunikation mit dem Moodleplugin über das AJAX-Protokoll organisiert. Jsdot dient als Grapheditor.  

\subsubsection{Datenstruktur-Verarbeitungsservice}  
\label{sec:technWebService}

Der Datenstruktur-Verarbeitungsservice kompiliert und führt den vom Lehrenden bereitgestellten Code aus. Er ist als Webservice implementiert und kann somit von einem anderen Server aus bereitgestellt werden. Die Ausführung des Codes ist vor jedem Einfügen oder Löschen, das von einem Studierenden durchgeführt wird, notwendig.

Auf der Grundlage des bisherigen, eingereichten Schritts berechnet die Ausführungsumgebung den nächsten  die Ausführungsumgebung der nächsten Betriebswert (Taste, die eingefügt oder gelöscht wird), die erwartete Lösung und die entsprechende detaillierte Rückmeldungen.

\subsubsection{Moodleplugin backendseitig}
\label{sec:dsbuilderbackend}
Das backendseitige Moodleplugin besitzt die grundlegende Struktur eines Moodleplugins, wie sie in Kapitel \ref{sec:aufbauPlugin} dargestellt wurde. Die weiteren, für die Funktionalität des Moduls wichtigen Dateien sind die Dateien \pfile{renderer.php} und \pfile{renderable.php}, welchen DOM-Code generieren, die Dateien \pfile{ajax\_request.php} und \pfile{ajax\_helper.php}, welche das Handling von AJAX-Anfragen übernehmen und die Datei \pfile{lib/js\_dot\_convert.php}, welche die Funktionen zur Verarbeitung der Datenstrukturen zur Verfügung stellt. Im weiteren Verlauf dieses Abschnittes werden diese drei Funktionalitäten tiefgehender erläutert und Codeausschnitte exemplarisch vorgestellt.

\paragraph{Generierung des DOM-Codes} \hfill \\
Die Datei, welche für die Generierung des DOM-Codes verantwortlich ist, ist die \pfile{renderer.php}. Die Datei \pfile{renderable.php} implemeniert hingegen ein Interface, welches für die Verwendung des moodleinternen Renderers notwendig ist \cite{moodleRenderer}. Die in der Datei  \pfile{renderer.php} enthaltende Klasse \pfile{mod\_dsbuilder\_renderer} enthält Funktionen zum erstellen der für den DSBuilder benötigten Ansichten. So können Übersichten über laufende oder eingereichte Abgaben oder Notentabellen generiert werden.
\begin{figure}[htbp] 
\lstinputlisting[language=PHP, caption=Aufruf zur Initialisierung eines JSDot-Graphs, frame=single, label=code:initGraphEditor]{code/initDSBuilder.php}
\end{figure}
Ebenso können Ansichten zur Aufgabenbearbeitung generiert werden. Hierbei übernimmt die Initiierung des Grapheneditors, welche im Quellcode \ref{code:initGraphEditor} dargestellt wird, eine zentrale Rolle. Es wird eine Hilfsfunktion des Moodle-API \cite{moodleJsApi} verwendet, welche die frontendseitige JavaScript-Funktion zur Initialisierung des Grapheneditors anstößt. Die frontendseitige Funktionalität wird im Kapitel \ref{sec:dsbuilderfrontend} vertieft.

\paragraph{Modulinterne AJAX-API} \hfill \\
Zur asynchronen Datenübertragung zwischen Browser und Server stellt das Moodleplugin eine AJAX Api zur Verfügung. 
Der Quellcode \ref{code:ajax} zeigt einen Codeausschnitt aus der \pfile{ajax\_request.php}, in dem die möglichen Aktionen definiert sind, die nach einer AJAX-Anfrage durchgeführt werden können. Hierbei handelt es sich um die Funktionen, welche über die Knöpfe unterhalb des Grapheneditors (vergl. Kapitel \ref{sec:funktionalitaet}, Abschnitt Studierender) angestoßen werden können. Explizit handelt es sich um die Funktionen \textit{Syntax prüfen} (Quellcode \ref{code:ajax}, Z. 2), \textit{Speichern und weiter} (Quellcode \ref{code:ajax}, Z. 6) und \textit{Letzten Schritt wiederholen} (Quellcode \ref{code:ajax}, Z. 10). Die jeweils angestoßenen Funktionen sind in der \pfile{ajax\_helper.php} definiert.
\begin{figure}[htbp] 
\lstinputlisting[language=PHP, caption=AJAX API, frame=single, label=code:ajax]{code/ajax.php}
\end{figure}
Von dort aus werden weitere Funktionen zur Datenstrukturverarbeitung in der Klasse \pfile{jsdot\_graph} angestoßen. Diese Funktionen werden im nächsten Abschnitt vertiefender behandelt.

\paragraph{Die Datenhaltung} \hfill \\
Das Modul DSBuilders benötigt vier Entitäten für seine Datenhaltung. Es handelt sich um die Entitäten \textit{DSBuilder}, \textit{Assigment File}, \textit{Submission} und \textit{Submission Step}. Die Abbildung \ref{fig:erm} zeigt das Datenmodell des Moduls. 
\begin{figure}[htbp] 
  \centering
     \includegraphics[width=0.9\textwidth]{graphics/ERM.jpg}
  \caption{Datenmodell des DSBuilders}
  \label{fig:erm}
\end{figure}
Nachdem das Modul neu in einem Kurs initialisiert worden ist, wird ein neues Datum der Entität \textit{DSBuilder} angelegt. Die der neuen Instanz des Moduls vom Lehrenden zugewiesenen Javadateien werden als Datum der Entität \textit{Assigment File}  gespeichert. Sobald Studierende die Instanz nutzen, wird für jeden Studierenden mit Vermerk auf die Instanz ein neues Datum der Entität \textit{Submission} angelegt. Jeder \textit{Submission} werden \textit{Submission Steps} zugeordnet. Sie beinhalten Informationen über die jeweiligen ausgeführten Schritte. 

\paragraph{Die Datenstrukturverarbeitung} \hfill \\
In der Datei \pfile{lib/js\_dot\_convert.php} liegt die Funktionalität der Datenstrukturverarbeitung. In ihr sind vier Klassen implementiert, von denen die Klasse \pfile{jsdot\_graph} eine Schnittstelle zur Konvertierung einer Datenstruktur zwischen dem Grapheneditor im Frontend und der Datenhaltung im Backend bietet. Abbildung \ref{fig:umlJsDotConvert} zeigt ein UML-Klassendiagramm der vier Klassen.
\begin{figure}[htbp] 
  \centering
     \includegraphics[width=0.9\textwidth]{graphics/UMjsDotConvert1.jpg}
  \caption{UML js\_dot\_convert}
  \label{fig:umlJsDotConvert}
\end{figure}



\subsubsection{Moodleplugin frontendseitig}
\label{sec:dsbuilderfrontend}

Die zentrale Datei im Frontend ist die \pfile{dsbuilder.js}. Sie organisiert die Kommunikation mit dem Grapheneditor. Der Codeauszug \ref{code:initJsDot} zeigt die Initialisierung eines neuen jsdot-Graphen. 
\begin{figure}[htbp] 
\lstinputlisting[language=JavaScript, caption=Initiierung eines JsDot-Graphs, frame=single, label=code:initJsDot]{code/initJsDot.js}
\end{figure}
Des weiteren stellt diese Datei die AJAX-Kommunikation zur Verfügung.